/*! UIkit 2.20.3 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
!function(e){var t;window.UIkit&&(t=e(UIkit)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return t||e(UIkit)})}(function(e){"use strict";function t(t){t=e.$(t);do{if(t.data("sortable"))return t;t=e.$(t).parent()}while(t.length);return t}function o(e,t){var o=e.parentNode;if(t.parentNode!=o)return!1;for(var n=e.previousSibling;n&&9!==n.nodeType;){if(n===t)return!0;n=n.previousSibling}return!1}function n(e,t){var o=t;if(o==e)return null;for(;o;){if(o.parentNode===e)return o;if(o=o.parentNode,!o||!o.ownerDocument||11===o.nodeType)break}return null}function a(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}var s,r,i,l,d,h,u,p,c,g="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;return e.component("sortable",{defaults:{animation:150,threshold:10,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",baseClass:"uk-sortable",noDragClass:"uk-sortable-nodrag",dragCustomClass:"",handleClass:!1,group:!1,stop:function(){},start:function(){},change:function(){}},boot:function(){e.ready(function(t){e.$("[data-uk-sortable]",t).each(function(){var t=e.$(this);if(!t.data("sortable")){e.sortable(t,e.Utils.options(t.attr("data-uk-sortable")))}})}),e.$html.on("mousemove touchmove",function(t){if(u){var o=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0]:t;(Math.abs(o.pageX-u.pos.x)>u.threshold||Math.abs(o.pageY-u.pos.y)>u.threshold)&&u.apply(o)}if(s){d||(d=!0,s.show(),s.$current.addClass(s.$sortable.options.placeholderClass),s.$sortable.element.children().addClass(s.$sortable.options.childClass),e.$html.addClass(s.$sortable.options.dragMovingClass));var n=s.data("mouse-offset"),a=parseInt(t.originalEvent.pageX,10)+n.left,r=parseInt(t.originalEvent.pageY,10)+n.top;s.css({left:a,top:r}),r<e.$win.scrollTop()?e.$win.scrollTop(e.$win.scrollTop()-Math.ceil(s.height()/2)):r+s.height()>window.innerHeight+e.$win.scrollTop()&&e.$win.scrollTop(e.$win.scrollTop()+Math.ceil(s.height()/2))}}),e.$html.on("mouseup touchend",function(e){if(u=h=!1,!r||!s)return r=s=null,void 0;var o=t(e.target),n=s.$sortable,a={type:e.type};o[0]&&n.dragDrop(a,n.element),n.dragEnd(a,n.element)})},init:function(){function t(){g?h.addEventListener("touchmove",v,!1):(h.addEventListener("mouseover",f,!1),h.addEventListener("mouseout",m,!1))}function o(){g?h.removeEventListener("touchmove",v,!1):(h.removeEventListener("mouseover",f,!1),h.removeEventListener("mouseout",m,!1))}function s(e){r&&d.dragMove(e,d)}function l(t){return function(o){var a,s,r;o&&(a=g&&o.touches&&o.touches[0]||{},s=a.target||o.target,g&&document.elementFromPoint&&(s=document.elementFromPoint(o.pageX-document.body.scrollLeft,o.pageY-document.body.scrollTop))),e.$(s).hasClass(d.options.childClass)?t.apply(s,[o]):s!==h&&(r=n(h,s),r&&t.apply(r,[o]))}}var d=this,h=this.element[0];p=[],0===this.element.children().length&&this.element.html(""),this.element.data("sortable-group",this.options.group?this.options.group:e.Utils.uid("sortable-group"));var u=l(function(t){var o=e.$(t.target),n=o.is("a[href]")?o:o.parents("a[href]");return t.preventDefault(),!g&&n.length&&n.one("click",function(e){e.preventDefault()}).one("mouseup",function(){c||n.trigger("click")}),d.dragStart(t,this)}),f=(l(function(e){return r?(e.preventDefault&&e.preventDefault(),!1):!0}),l(e.Utils.debounce(function(e){return d.dragEnter(e,this)}),40)),m=l(function(){var t=d.dragenterData(this);d.dragenterData(this,t-1),d.dragenterData(this)||(e.$(this).removeClass(d.options.overClass),d.dragenterData(this,!1))}),v=l(function(e){return r&&r!==this&&i!==this?(d.element.children().removeClass(d.options.overClass),i=this,d.moveElementNextTo(r,this),a(e)):!0});this.addDragHandlers=t,this.removeDragHandlers=o,window.addEventListener(g?"touchmove":"mousemove",s,!1),h.addEventListener(g?"touchstart":"mousedown",u,!1)},dragStart:function(t,o){c=!1,d=!1,l=!1;{var n=this,a=e.$(t.target);n.element.children()}if(g||2!=t.button){if(n.options.handleClass){var i=a.hasClass(n.options.handleClass)?a:a.closest("."+n.options.handleClass,n.element);if(!i.length)return}if(!a.is("."+n.options.noDragClass)&&!a.closest("."+n.options._noDragClass).length&&!a.is(":input")){r=o,s&&s.remove();var h=e.$(r),p=h.offset();u={pos:{x:t.pageX,y:t.pageY},threshold:n.options.threshold,apply:function(t){s=e.$('<div class="'+[n.options.draggingClass,n.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:p.top,left:p.left,width:h.width(),height:h.height(),padding:h.css("padding")}).data({"mouse-offset":{left:p.left-parseInt(t.pageX,10),top:p.top-parseInt(t.pageY,10)},origin:n.element,index:h.index()}).append(h.html()).appendTo("body"),s.$current=h,s.$sortable=n,h.data("sortable-group",n.options.group),n.addDragHandlers(),n.options.start(this,r),n.trigger("start.uk.sortable",[n,r]),c=!0,u=!1}}}}},dragMove:function(t){var o,n=e.$(document.elementFromPoint(t.pageX-document.body.scrollLeft,t.pageY-(window.pageYOffset||document.documentElement.scrollTop))),a=n.closest("."+this.options.baseClass),s=a.data("sortable-group"),i=e.$(r),l=i.parent(),d=i.data("sortable-group");a[0]!==l[0]&&void 0!==d&&s===d&&(a.data("sortable").addDragHandlers(),p.push(a),a.children().addClass(this.options.childClass),a.children().length>0?(o=n.closest("."+this.options.childClass),o.before(i)):n.append(i),0===l.children().length&&l.html(""),UIkit.$doc.trigger("mouseover"))},dragEnter:function(t,o){if(!r||r===o)return!0;var n=this.dragenterData(o);return this.dragenterData(o,n+1),0===n&&(e.$(o).addClass(this.options.overClass),this.moveElementNextTo(r,o)),!1},dragEnd:function(t,o){var n=this;r&&(this.options.stop(o),this.trigger("stop.uk.sortable",[this])),r=null,i=null,p.push(this.element),p.forEach(function(t){e.$(t).children().each(function(){1===this.nodeType&&(e.$(this).removeClass(n.options.overClass).removeClass(n.options.placeholderClass).removeClass(n.options.childClass),n.dragenterData(this,!1))})}),p=[],e.$html.removeClass(this.options.dragMovingClass),this.removeDragHandlers(),s&&(s.remove(),s=null)},dragDrop:function(e){"drop"===e.type&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),this.triggerChangeEvents()},triggerChangeEvents:function(){if(r){var t=e.$(r),o=s.data("origin"),n=t.closest("."+this.options.baseClass),a=[];o[0]===n[0]&&s.data("index")!=t.index()?a.push({el:this,mode:"moved"}):o[0]!=n[0]&&a.push({el:n,mode:"added"},{el:o,mode:"removed"}),a.forEach(function(e){e.el.trigger("change.uk.sortable",[e.el,r,e.mode])})}},dragenterData:function(t,o){return t=e.$(t),1==arguments.length?parseInt(t.data("child-dragenter"),10)||0:(o?t.data("child-dragenter",Math.max(0,o)):t.removeData("child-dragenter"),void 0)},moveElementNextTo:function(t,n){l=!0;var a=this,s=e.$(t).parent().css("min-height",""),r=o(t,n)?n:n.nextSibling,i=s.children(),d=i.length;return a.options.animation?(s.css("min-height",s.height()),i.stop().each(function(){var t=e.$(this),o=t.position();o.width=t.width(),t.data("offset-before",o)}),n.parentNode.insertBefore(t,r),e.Utils.checkDisplay(a.element.parent()),i=s.children().each(function(){var t=e.$(this);t.data("offset-after",t.position())}).each(function(){var t=e.$(this),o=t.data("offset-before");t.css({position:"absolute",top:o.top,left:o.left,"min-width":o.width})}),i.each(function(){var t=e.$(this),o=(t.data("offset-before"),t.data("offset-after"));t.css("pointer-events","none").width(),setTimeout(function(){t.animate({top:o.top,left:o.left},a.options.animation,function(){t.css({position:"",top:"",left:"","min-width":"","pointer-events":""}).removeClass(a.options.overClass).removeData("child-dragenter"),d--,d||(s.css("min-height",""),e.Utils.checkDisplay(a.element.parent()))})},0)}),void 0):(n.parentNode.insertBefore(t,r),e.Utils.checkDisplay(a.element.parent()),void 0)},serialize:function(){var t,o,n=[];return this.element.children().each(function(a,s){t={};for(var r=0;r<s.attributes.length;r++)o=s.attributes[r],0===o.name.indexOf("data-")&&(t[o.name.substr(5)]=e.Utils.str2json(o.value));n.push(t)}),n}}),e.sortable});